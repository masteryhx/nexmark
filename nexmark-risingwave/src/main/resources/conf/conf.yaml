# Using docker-compose mode deploy RisingWave, see https://www.risingwave.dev/docs/current/risingwave-trial/?method=docker-compose for more detail.
# We total configure 1 compute node and 1 compactor node on one machine. The frontend and meta service node deploy in another machine. The machine is AWS EC2 m6id.2xlarge (8vCPUs 32 GB memory).
# Some aws-related environment variables must be configured in aws.env, some configs could be seen in risingwave.toml.

# In compute-node docker-compose yaml configure compute node memory and parallelism info, this is an example, the memory is 16G and parallelism is 8.
compute-node-0:
  image: "ghcr.io/risingwavelabs/risingwave:v0.19.2"
  command:
    - compute-node
    - "--parallelism"
    - "8"
    - "--total-memory-bytes"
    - "17179869184"
    - "--config-path"
    - /risingwave.toml
  env_file: aws.env

# In meta-node docker-compose yaml configure state-store to your s3 path, example as below.
meta-node-0:
  image: "ghcr.io/risingwavelabs/risingwave:v0.19.2"
  commond:
    - "--state-store"
    - "hummock+s3://benchmark"
    - "--config-path"
    - /risingwave.toml
  env_file: aws.env